# 认识 C++ 的对象

## 动态分配内存

运算符 `new` 用于申请动态存储空间，它的操作数为某种数据类型可以带有初值表达式或元素个数。对于只存储一个基本类型数据的指针，使用 `new` 为其动态分配的语法格式为：

指针 = new 类型名;
```c++
int *p = new int;
int *p = new int(10);
```

当动态分配的内存空间在程序中使用完毕之后，必须显式地将它们释放。在 C++ 程序中由 `new` 分配的动态内存空间必须通过 `delete` 运算符释放。使用 `delete` 对动态分配的单个变量进行释放的语法格式为：

delete 指针名;

## 引用

C++ 语言支持引用。引用是个别名，建立时需要用领一个数据对象（如一个变量）的名字进行初始化，以指定该引用所代表的数据对象。引用被建立后，对引用的任何操作实际上就是对所代表的数据对象的操作，系统没有为引用分配新的存储空间，引用的声明方式如下：

数据对象& 别名 = 对象名;

```c++
int a = 1;
int& r = a; // r 和 a 现在引用同一个对象
int x = r; // x = 1
r = 2; // a = 2
```

使用引用时应遵循以下条件：
- 创建引用时，必须立即对其进行初始化；
- 一旦一个引用被初始化为一个对象的引用，它就不能再被改变为对另一个对象的引用；
- 不能有 NULL 引用。必须确保引用是对具体合法的对象的引用；

引用与指针有相似之处，它会对内存地址上存在的变量进行修改，但它不占用新的地址，从而节约开销。指针是低级的直接操作内存地址的机制，功能强大但使用不慎极易产生错误。引用则是较高级地封装了指针的特性，它不直接操作内存地址，不可以由强制类型转换而得到，因而具有较高的安全性。